(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-618267e2"],{"9d9b":function(e,t,s){"use strict";s("cc17")},a55b:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-register"},[s("div",{staticClass:"contain"},[s("div",{staticClass:"big-box",class:{active:e.isLogin}},[e.isLogin?s("div",{staticClass:"big-contain"},[s("div",{staticClass:"btitle"},[e._v("账户登录")]),s("div",{staticClass:"bform"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.mobile,expression:"form.mobile"}],attrs:{type:"email",placeholder:"手机号"},domProps:{value:e.form.mobile},on:{input:function(t){t.target.composing||e.$set(e.form,"mobile",t.target.value)}}}),e.mobileError?s("span",{staticClass:"errTips"},[e._v(e._s(e.mobileMsg))]):e._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}}),e.passwordError?s("span",{staticClass:"errTips"},[e._v(e._s(e.passwordMsg))]):e._e()]),s("a-button",{staticClass:"bbutton",attrs:{type:"primary",htmlType:"submit",loading:e.isExecuteLogin,disabled:e.isExecuteLogin},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.login.apply(null,arguments)}}},[e._v("登录 ")])],1):s("div",{staticClass:"big-contain"},[s("div",{staticClass:"btitle"},[e._v("创建账户")]),s("div",{staticClass:"bform"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.username,expression:"form.username"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.form.username},on:{input:function(t){t.target.composing||e.$set(e.form,"username",t.target.value)}}}),e.existed?s("span",{staticClass:"errTips"},[e._v("* 用户名已经存在！ *")]):e._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.useremail,expression:"form.useremail"}],attrs:{type:"email",placeholder:"邮箱"},domProps:{value:e.form.useremail},on:{input:function(t){t.target.composing||e.$set(e.form,"useremail",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.userpwd,expression:"form.userpwd"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:e.form.userpwd},on:{input:function(t){t.target.composing||e.$set(e.form,"userpwd",t.target.value)}}})]),s("button",{staticClass:"bbutton",on:{click:e.register}},[e._v("注册")])])]),s("div",{staticClass:"small-box",class:{active:e.isLogin}},[e.isLogin?s("div",{staticClass:"small-contain"},[s("div",{staticClass:"stitle"},[e._v("欢迎使用订单系统!")]),s("p",{staticClass:"scontent"},[e._v("登录查询订单详情")])]):s("div",{staticClass:"small-contain"},[s("div",{staticClass:"stitle"},[e._v("欢迎回来!")]),s("p",{staticClass:"scontent"},[e._v("与我们保持联系，请登录你的账户")]),s("button",{staticClass:"sbutton",on:{click:e.changeType}},[e._v("登录")])])])])])},o=[],i=s("c0f4"),n={name:"Login",data:function(){return{loginCount:0,isExecuteLogin:!1,isLogin:!0,mobileError:!1,mobileMsg:"",passwordError:!1,passwordMsg:"",existed:!1,form:{mobile:"",password:""}}},mounted:function(){this.form.mobile=window.sessionStorage.getItem("laisonMobile"),window.addEventListener("keydown",this.handleKeyDown,!0)},created:function(){},destroyed:function(){window.removeEventListener("keydown",this.handleKeyDown,!0)},methods:{handleKeyDown:function(e){13===e.keyCode&&(this.loginCount++,console.log("execute",this.loginCount),this.login())},changeType:function(){this.isLogin=!this.isLogin,this.form.mobile="",this.form.password=""},register:function(){var e=this,t=this;""!=t.form.username&&""!=t.form.useremail&&""!=t.form.userpwd?t.$axios({method:"post",url:"http://127.0.0.1:10520/api/user/add",data:{username:t.form.username,email:t.form.useremail,password:t.form.userpwd}}).then((function(t){switch(t.data){case 0:alert("注册成功！"),e.login();break;case-1:e.existed=!0;break}})).catch((function(e){console.log(e)})):alert("填写不能为空！")},login:function(){var e=this;if(!this.isExecuteLogin)if(this.isExecuteLogin=!0,this.form.mobile)if(this.form.mobile.length<1)this.loginError(1,"手机号没有输入");else if(this.form.password.length<1)this.loginError(2,"密码没有输入");else{var t=window.btoa(this.form.password);this.$message.loading("登录中..",0),Object(i["n"])({mobile:this.form.mobile,password:t}).then((function(t){e.$message.destroy(),e.loginSuccess()})).catch((function(t){e.$message.destroy(),e.loginError(t.errcode,t.errmsg)}))}else this.loginError(1,"手机号没有输入")},loginSuccess:function(){this.isExecuteLogin=!1,this.mobileError=!1,this.mobileMsg="",this.passwordError=!1,this.passwordMsg="",this.$message.success("登录成功！"),window.sessionStorage.setItem("laisonMobile",this.form.mobile),this.$router.push("/Home")},loginError:function(e,t){this.isExecuteLogin=!1,1==e?(this.mobileError=!0,this.mobileMsg=t,this.passwordError=!1,this.passwordMsg=""):2==e?(this.mobileError=!1,this.mobileMsg="",this.passwordError=!0,this.passwordMsg=t):this.$message.error(t)}}},a=n,u=(s("9d9b"),s("2877")),c=Object(u["a"])(a,r,o,!1,null,"3f4b2a16",null);t["default"]=c.exports},b775:function(e,t,s){"use strict";s("d3b7");var r=s("bc3a"),o=s.n(r),i=s("e411"),n=o.a.create({baseURL:"/dingding",timeout:1e4});n.interceptors.request.use((function(e){var t=window.sessionStorage.getItem("laisonToken");return t&&(e.headers["token"]=t),e}),(function(e){return console.log("request:error",e),Promise.reject(e)})),n.interceptors.response.use((function(e){var t=e.status;if(200!==t)return Promise.reject({errcode:t,errmsg:e.statusText?e.statusText:"获取网络请求失败"});var s=e.data;return s?void 0===s.errcode||null===s.errcode?e:0!==s.errcode?(50008===s.errcode&&(window.sessionStorage.setItem("laisonToken",""),i["a"].push("/")),Promise.reject({errcode:s.errcode,errmsg:s.errmsg?s.errmsg:"Error"})):(e.headers&&e.headers.authorization&&window.sessionStorage.setItem("laisonToken",e.headers.authorization),s):Promise.reject({errcode:t,errmsg:e.statusText?e.statusText:"获取网络请求失败"})}),(function(e){return e.message?-1!==e.message.indexOf("50008")?(window.sessionStorage.setItem("laisonToken",""),i["a"].push("/"),Promise.reject({errcode:50008,errmsg:"token过期或者失效，请重新登录！"})):Promise.reject({errcode:500,errmsg:e.message}):Promise.reject({errcode:500,errmsg:JSON.stringify(e)})})),t["a"]=n},c0f4:function(e,t,s){"use strict";s.d(t,"n",(function(){return o})),s.d(t,"e",(function(){return i})),s.d(t,"m",(function(){return n})),s.d(t,"f",(function(){return a})),s.d(t,"g",(function(){return u})),s.d(t,"a",(function(){return c})),s.d(t,"h",(function(){return l})),s.d(t,"i",(function(){return d})),s.d(t,"c",(function(){return m})),s.d(t,"k",(function(){return g})),s.d(t,"j",(function(){return f})),s.d(t,"l",(function(){return p})),s.d(t,"d",(function(){return h})),s.d(t,"b",(function(){return b}));var r=s("b775");function o(e){return Object(r["a"])({url:"/login",method:"post",data:e})}function i(){return Object(r["a"])({url:"/getUserInfo",method:"get"})}function n(){return Object(r["a"])({url:"/loginOut",method:"post"})}function a(){return Object(r["a"])({url:"/getProcessCodes",method:"get"})}function u(e){return Object(r["a"])({url:"/getProcessColumns/"+e,method:"GET"})}function c(e,t){return Object(r["a"])({url:"/changeProcessColumns/"+e,method:"post",data:t})}function l(e){return Object(r["a"])({url:"/getScreenCondition/"+e,method:"get"})}function d(e,t){return Object(r["a"])({url:"/getProcessDetail/"+e,method:"post",data:t})}function m(){return Object(r["a"])({url:"/forceRefreshData",method:"post"})}function g(e){return Object(r["a"])({url:"/getUserInfoById/"+e,method:"get"})}function f(e){return Object(r["a"])({url:"/getRecordsByCondition",method:"post",data:e})}function p(){return Object(r["a"])({url:"/getUserDept",method:"get"})}function h(e,t){return Object(r["a"])({url:"/getEnclosureUrl/"+e,method:"post",responseType:"blob",data:t})}function b(e){return Object(r["a"])({url:"/changePwd",method:"post",data:e})}},cc17:function(e,t,s){}}]);
//# sourceMappingURL=chunk-618267e2.9f7d1ed8.js.map