(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bdbd5f2"],{"0453":function(e,t,i){},1276:function(e,t,i){"use strict";var l=i("d784"),r=i("44e7"),n=i("825a"),a=i("1d80"),s=i("4840"),o=i("8aa5"),u=i("50c4"),d=i("14c3"),c=i("9263"),h=i("9f7f"),f=h.UNSUPPORTED_Y,v=[].push,p=Math.min,m=4294967295;l("split",2,(function(e,t,i){var l;return l="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var l=String(a(this)),n=void 0===i?m:i>>>0;if(0===n)return[];if(void 0===e)return[l];if(!r(e))return t.call(l,e,n);var s,o,u,d=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,p=new RegExp(e.source,h+"g");while(s=c.call(p,l)){if(o=p.lastIndex,o>f&&(d.push(l.slice(f,s.index)),s.length>1&&s.index<l.length&&v.apply(d,s.slice(1)),u=s[0].length,f=o,d.length>=n))break;p.lastIndex===s.index&&p.lastIndex++}return f===l.length?!u&&p.test("")||d.push(""):d.push(l.slice(f)),d.length>n?d.slice(0,n):d}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:t.call(this,e,i)}:t,[function(t,i){var r=a(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,r,i):l.call(String(r),t,i)},function(e,r){var a=i(l,e,this,r,l!==t);if(a.done)return a.value;var c=n(e),h=String(this),v=s(c,RegExp),b=c.unicode,D=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(f?"g":"y"),g=new v(f?"^(?:"+c.source+")":c,D),w=void 0===r?m:r>>>0;if(0===w)return[];if(0===h.length)return null===d(g,h)?[h]:[];var _=0,F=0,x=[];while(F<h.length){g.lastIndex=f?0:F;var y,S=d(g,f?h.slice(F):h);if(null===S||(y=p(u(g.lastIndex+(f?F:0)),h.length))===_)F=o(h,F,b);else{if(x.push(h.slice(_,F)),x.length===w)return x;for(var C=1;C<=S.length-1;C++)if(x.push(S[C]),x.length===w)return x;F=_=y}}return x.push(h.slice(_)),x}]}),f)},"19de":function(e,t){e.exports=function(e,t,i,l){var r="undefined"!==typeof l?[l,e]:[e],n=new Blob(r,{type:i||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(n,t);else{var a=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(n):window.webkitURL.createObjectURL(n),s=document.createElement("a");s.style.display="none",s.href=a,s.setAttribute("download",t),"undefined"===typeof s.download&&s.setAttribute("target","_blank"),document.body.appendChild(s),s.click(),setTimeout((function(){document.body.removeChild(s),window.URL.revokeObjectURL(a)}),200)}}},"7aec":function(e,t,i){},"99af":function(e,t,i){"use strict";var l=i("23e7"),r=i("d039"),n=i("e8b5"),a=i("861d"),s=i("7b0b"),o=i("50c4"),u=i("8418"),d=i("65f0"),c=i("1dde"),h=i("b622"),f=i("2d00"),v=h("isConcatSpreadable"),p=9007199254740991,m="Maximum allowed index exceeded",b=f>=51||!r((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),D=c("concat"),g=function(e){if(!a(e))return!1;var t=e[v];return void 0!==t?!!t:n(e)},w=!b||!D;l({target:"Array",proto:!0,forced:w},{concat:function(e){var t,i,l,r,n,a=s(this),c=d(a,0),h=0;for(t=-1,l=arguments.length;t<l;t++)if(n=-1===t?a:arguments[t],g(n)){if(r=o(n.length),h+r>p)throw TypeError(m);for(i=0;i<r;i++,h++)i in n&&u(c,h,n[i])}else{if(h>=p)throw TypeError(m);u(c,h++,n)}return c.length=h,c}})},a434:function(e,t,i){"use strict";var l=i("23e7"),r=i("23cb"),n=i("a691"),a=i("50c4"),s=i("7b0b"),o=i("65f0"),u=i("8418"),d=i("1dde"),c=d("splice"),h=Math.max,f=Math.min,v=9007199254740991,p="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!c},{splice:function(e,t){var i,l,d,c,m,b,D=s(this),g=a(D.length),w=r(e,g),_=arguments.length;if(0===_?i=l=0:1===_?(i=0,l=g-w):(i=_-2,l=f(h(n(t),0),g-w)),g+i-l>v)throw TypeError(p);for(d=o(D,l),c=0;c<l;c++)m=w+c,m in D&&u(d,c,D[m]);if(d.length=l,i<l){for(c=w;c<g-l;c++)m=c+l,b=c+i,m in D?D[b]=D[m]:delete D[b];for(c=g;c>g-l+i;c--)delete D[c-1]}else if(i>l)for(c=g-l;c>w;c--)m=c+l-1,b=c+i-1,m in D?D[b]=D[m]:delete D[b];for(c=0;c<i;c++)D[c+w]=arguments[c+2];return D.length=g-l+i,d}})},a43e:function(e,t,i){"use strict";i("7aec")},c190:function(e,t,i){"use strict";i("0453")},cceb:function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"margin-bottom":"10px"}},[i("order-detail",{attrs:{"order-detail":e.orderDetail}}),i("meter-and-parts-info",{attrs:{"order-detail":e.orderDetail}}),i("contract-info",{attrs:{"order-detail":e.orderDetail}})],1)},r=[],n=i("b65a"),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-card",[i("a-descriptions",{attrs:{title:e.title,size:e.aDescripSize}},[e._l(e.processDetail,(function(t,l){return[t.name&&""!==t.name?i("a-descriptions-item",{key:l,attrs:{label:t.name}},[e._v(" "+e._s(t.value)+" ")]):e._e()]}))],2)],1)},s=[],o=(i("b0c0"),{name:"order_detail",mixins:[n["a"]],props:{orderDetail:{type:Object,required:!0}},data:function(){return{aDescripSize:"middle",processDetail:[],title:""}},mounted:function(){this.buildOrderDetail()},methods:{buildOrderDetail:function(){var e=this.buildFormValues(this.orderDetail);if(e&&e.length>0){this.processDetail.push({name:"订单编号",value:this.orderDetail.business_id}),this.processDetail.push({name:"合同/订单编号",value:this.orderDetail.contract_no}),this.processDetail.push({name:"订单状态",value:this.orderDetail.status});var t=this.buildDetail("DDSelectField_IQN8UHBLW0O0",e);this.processDetail.push(t),this.processDetail.push({name:"下单时间",value:this.orderDetail.create_time}),this.processDetail.push(this.buildDetail("DDDateField_54MW71DFAHW",e));var i=this.buildDetail("TextField-K2AD4O5B",e),l="";i&&"未知"!==i.value&&(l=i.value,this.processDetail.push(i));var r=this.buildMutilDetail("TextField_5U9J93A89QK0","DDSelectField_1CT60NZVTPZ40",e);r&&"未知"!==r.value&&(l||(l=r.value),this.processDetail.push(r));var n=this.buildMutilDetail("TextField_HMYXD9HIM1S0","DDSelectField_2106GYZEB8ZK0",e);n&&"未知"!==n.value&&(l||(l=n.value),this.processDetail.push(n));var a=this.buildDetail("InnerContactField_1O7TEJSL96XS0",e);this.processDetail.push(a),this.processDetail.push(this.buildDetail("DDSelectField_21ANSA0DFC740",e)),this.processDetail.push(this.buildDetail("DDSelectField_U7LQGHVRC6O0",e)),this.processDetail.push(this.buildDetail("DDSelectField_23S0WEA8ZOM80",e));var s=this.buildDetail("DDSelectField_1RRO07830CQO0",e);s&&"未知"!==s.value&&this.processDetail.push(s);var o=this.buildPaymentMethod(e);o&&this.processDetail.push(o);var u=this.buildDetail("TextField_NP4BFCY0U2O0",e);u&&"未知"!==u.value&&this.processDetail.push(u);var d=this.buildMutilDetail("MoneyField_1W6TMJ9O7SN40","CalculateField_Z7V79W257400",e);d&&"未知"!==d.value&&this.processDetail.push(d),this.processDetail.push(this.buildDetail("MoneyField_1MIXOZA98IU80",e)),this.processDetail.push(this.buildDetail("MoneyField_DVG19ZQ4I1S0",e)),this.processDetail.push(this.buildDetail("DDSelectField_MAH9871U6FK0",e));var c=this.buildDetail("CalculateField_ECO9DA8P8480",e);c&&"未知"===c.value&&(c.value="0"),this.processDetail.push(c),this.title=this.buildTitle(l,a,t.value)}},buildPaymentMethod:function(e){var t="",i="",l=this.buildDetail("NumberField_52585AHSIIC0",e);l&&l.value&&(t+=l.name+":"+l.value+",",l.value&&"未知"!==l.value&&(i+=l.value));var r=this.buildDetail("NumberField_135OUTEYCIE80",e);r&&r.value&&(t+=r.name+":"+r.value+",",r.value&&"未知"!==r.value&&(i+=r.value));var n=this.buildDetail("NumberField_MQPXOHZOX9S0",e);n&&n.value&&(t+=n.name+":"+n.value+",",n.value&&"未知"!==n.value&&(i+=n.value));var a=this.buildDetail("NumberField_1YCI780G434W0",e);return a&&a.value&&(t+=a.name+":"+a.value,a.value&&"未知"!==a.value&&(i+=a.value)),void 0!==i&&""!==i?{name:"付款描述",value:t}:null},buildTitle:function(e,t,i){e||(e="未知"),i||(i="未知");var l=t.value&&void 0!==t.value?t.value:"未知";return e+" - "+i+" - "+l}}}),u=o,d=i("2877"),c=Object(d["a"])(u,a,s,!1,null,null,null),h=c.exports,f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-card",{staticStyle:{"margin-top":"20px"}},e._l(e.formValues,(function(t,l){return i("div",{key:l},[0!==l?i("h3",{staticStyle:{"margin-top":"30px"}}):e._e(),i("div",{staticStyle:{"margin-bottom":"8px"}},[i("span",{staticClass:"formName"},[e._v(e._s(t.name))]),i("span",{staticClass:"formValue"},[e._v(e._s(e.buildStartValue(t)))])]),i("a-table",{ref:"table",refInFor:!0,attrs:{rowKey:function(e,t){return t},size:"middle",bordered:"",scroll:e.buildScrollInfo(t),columns:e.buildColumns(t),dataSource:e.buildData(t),pagination:!1},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"OrderFile",fn:function(t,l){return[i("div",{staticClass:"dd-cover",on:{click:function(i){return e.onOrderFileClick(l,t)}}},[e._v(" "+e._s(e.previewOrderFileInfo(l,t))+" ")])]}}],null,!0)},[e._v(" /> ")])],1)})),0)},v=[],p=(i("a434"),i("99af"),{name:"meter_and_parts_info",mixins:[n["a"]],props:{orderDetail:{type:Object,required:!0}},data:function(){return{aDescripSize:"middle",formValues:[],dataSource:[],scrollInfo:{x:0,y:400}}},created:function(){},watch:{orderDetail:function(e,t){}},mounted:function(){this.buildForms()},methods:{previewOrderFileInfo:function(e,t){var i=this.json2Object(t,!0);if(!i)return t;if("string"===typeof i)return t;var l=i.fileName;return l&&l.length>28&&(l=l.substring(0,14)+"..."+l.substring(l.length-14,l.length)),l},onOrderFileClick:function(e,t){var i=this.json2Object(t,!0);i&&"string"!==typeof i&&this.downloadFile(this.orderDetail.id,i)},downloadFile:function(e,t){var i=this;this.loading=!0,this.getFileUrl(e,t).then((function(e){i.loading=!1,i.downloadByBlob(e,t.fileName)})).catch((function(e){i.loading=!1}))},buildStartValue:function(e){if(e.ext_value&&e.ext_value.statValue&&e.ext_value.statValue.length>0){for(var t="",i=0;i<e.ext_value.statValue.length;i++){var l=e.ext_value.statValue[i],r=l.value;r||(r=l.num),r||(r=0),t+=l.label+":"+r+" "}return"("+t+")"}return""},handleTableChange:function(e){this.pageInfo=e},buildForms:function(){var e=this.buildFormValues(this.orderDetail);e&&e.length>0&&(this.formValues=this.buildWithExtFormValues(e))},buildScrollInfo:function(e){var t=this.buildColumns(e);if(!t)return{x:1e3,y:400};var i=this.calculateWidth(t);return{x:i,y:400}},buildColumns:function(e){var t=this.buildDataSource(e);if(!t)return null;if(Array.isArray(t)&&t.length<1)return null;var i=[];if(t&&t.length>0){var l=t[0];if(l&&l.length>0)for(var r=0;r<l.length;r++){var n=l[r],a={title:n.label,dataIndex:n.key,align:"center",width:this.buildColumnWidth(n.label,n.value)},s=this.checkAndSetRender(a);s&&(a.scopedSlots=s[0],a.title=s[1]),i.push(a)}}if(i.length>8){var o=[],u=this.queryColumn("NumberField_IF0A4MK3APS0",i);u&&(i.splice(u.index,1),o.push(u.value));var d=this.queryColumn("MoneyField_UL8YZGXOGY80",i);d&&(i.splice(d.index,1),o.push(d.value));var c=this.queryColumn("CalculateField_AVDTK4UABFC0",i);c&&(i.splice(c.index,1),o.push(c.value));var h=this.queryColumn("NumberField_1XW21DBA31XC0",i);h&&(i.splice(h.index,1),o.push(h.value));var f=this.queryColumn("CalculateField_1AGXPYH0C9VK0",i);f&&(i.splice(f.index,1),o.push(f.value));var v=this.queryColumn("DDSelectField_KZFVELA0TWG0",i);if(v){if(o.length>0){var p=v.index;if(p===i.length-1)i=i.concat(o);else for(var m=0;m<o.length;m++)i.splice(p+(m+1),0,o[m])}}else o.length>0&&(i=o.concat(i))}return this.scrollInfo.x=this.calculateWidth(i),i},checkAndSetRender:function(e){if(!e)return null;var t=e.dataIndex,i=null;return t&&-1!==t.indexOf("DDAttachment_")&&(i=[],i[0]={customRender:"OrderFile"},i[1]=e.title),i},queryColumn:function(e,t){if(!e||!t||t.length<1)return null;for(var i=null,l=0;l<t.length;l++){var r=t[l];if(r.dataIndex===e)return i={},i.index=l,i.value=r,i}return i},buildData:function(e){var t=[],i=this.buildDataSource(e);if(i&&i.length>0)for(var l=0;l<i.length;l++){var r=i[l];if(r){for(var n={},a=0;a<r.length;a++){var s=r[a];n[s.key]=s.value}t.push(n)}}return t},buildDataSource:function(e){var t=[];if(e&&e.value&&e.value.length>0)for(var i=0;i<e.value.length;i++){var l=e.value[i];l.rowValue&&t.push(l.rowValue)}return t},calculateWidth:function(e){for(var t=0,i=0;i<e.length;i++)t+=parseInt(e[i].width);return t}}}),m=p,b=(i("a43e"),Object(d["a"])(m,f,v,!1,null,null,null)),D=b.exports,g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-card",{staticStyle:{"margin-top":"20px"}},[i("h3",{staticStyle:{"margin-bottom":"15px"}},[e._v(" 合同文件/备表 ")]),e.contractInfo.value&&"未知"!==e.contractInfo.value?i("div",{staticClass:"preview-file",on:{click:e.onFileDownload}},[e._v(" "+e._s(e.previewOrderFileInfo(e.contractInfo.value))+" ")]):i("h4",[e._v(" 无合同文件 ")]),i("a-modal",{attrs:{title:"订单详情","mask-closable":!1,width:800,footer:null},model:{value:e.showListForm,callback:function(t){e.showListForm=t},expression:"showListForm"}},[e.showListForm?i("div",[i(e.FileList,{tag:"component",attrs:{"file-value":e.fileListForm}})],1):e._e()])],1)},w=[],_=(i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("ac1f"),i("1276"),i("4601")),F=(i("19de"),i("0fea"),{name:"contract_info",mixins:[n["a"],_["a"]],props:{orderDetail:{type:Object,required:!0}},data:function(){return{aDescripSize:"middle",contractInfo:{},showListForm:!1,fileListForm:[]}},created:function(){},mounted:function(){this.buildContractInfo()},watch:{orderDetail:function(e,t){}},methods:{buildContractInfo:function(){var e=this.buildFormValues(this.orderDetail);e&&e.length>0&&(this.contractInfo=this.buildDetail("DDAttachment_N09RSD011CW0",e))},previewOrderFileInfo:function(e){if(!this.isJsonStr(e))return e;var t="",i=JSON.parse(e);if(i&&i.length>0)for(var l=0;l<i.length;l++){var r=i[l];t+=r.fileName+","}return t.length>0&&(t=t.substring(0,t.length-1)),t},onFileDownload:function(){if(this.contractInfo&&"未知"!==this.contractInfo.value){var e=JSON.parse(this.contractInfo.value);if(e)if(1===e.length){var t=e[0];this.downloadFile(this.orderDetail.id,t)}else this.showListForm=!0,this.fileListForm=e}},downloadFile:function(e,t){var i=this;this.openMessage(),console.log("procInst",t),this.getFileUrl(e,t).then((function(e){e?(i.$message.destroy(),i.downloadByBlob(e,t.fileName)):i.showErrorMsg("下载出错",500,!0)})).catch((function(e){i.showErrorMsg(e.errmsg,e.errcode,!0)}))},showErrorMsg:function(e,t,i){var l;i&&(this.loading=!1,this.isSync=!1),l=t&&null!=t?"errorCode："+t+" , errorMsg："+e:e,this.$message.destroy(),this.$message.error(l)},openMessage:function(){this.hide=this.$message.loading("获取下载链接..",0)},downloadUrlFile:function(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=function(){200===i.status||console.log("errrr",i)},i.send()},saveAs:function(e,t){var i=window.URL||window.webkitURL||window,l=new Blob([e]),r=document.createElementNS("http://www.w3.org/1999/xhtml","a");r.href=i.createObjectURL(l),r.download=t,r.click()},getFileName:function(e){var t=e.lastIndexOf("/")+1,i=e.substring(t);return i=decodeURI(i.split("?")[0]),i}}}),x=F,y=(i("c190"),Object(d["a"])(x,g,w,!1,null,null,null)),S=y.exports,C={name:"order-detail_model",mixins:[n["a"]],props:{orderDetail:{type:Object,required:!0}},components:{OrderDetail:h,MeterAndPartsInfo:D,ContractInfo:S},data:function(){return{}},created:function(){},watch:{orderDetail:function(e,t){}},methods:{}},O=C,I=Object(d["a"])(O,l,r,!1,null,null,null);t["default"]=I.exports}}]);
//# sourceMappingURL=chunk-0bdbd5f2.9ff87f0e.js.map